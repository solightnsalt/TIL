# ⭐️모델링⭐️

+ Db 구조나 형식으로 모델 구조만 보고 어떤 데이터를 다루는지 알 수 있다 






## 종류 
### 개념적 데이터 모델링

+ 요구사항을 찾고 분석하는 과정 
+ 핵심 개체 entity 사이의 관계를 찾아내고 표현




### 논리적 데이터 모델링

+ 디비 설계 프로세스 과정. 
+ 정보의 논리적인 구조와 규칙을 명확하게 표현하는 기법/과정



### 물리적 데이터 모델링

+ 논리적 데이터 모델링으로 한 게 실제로 어떻게 구현이 되는지 
+ 장고로 프로젝트 할 때도 굉장히 중요한 요소



## 주요 용어

### ERD
+ Entity relation diagram
+ 개체 관계 모델 
+ 참고 사이트 : [ERD Diagram](https://www.app.diagrams.net)
+ 아래 예시들을 보면 서비스 UI / UX = database 매우 밀접하게 연관되어있음 

#### ERD Diagram
<img src="https://2107204891-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-L9shwSMiocGHpSKcbss%2F-MICzZ7qQctGb1asSwQZ%2F-MID1H3ekwx6i90w8TsC%2FMain.png?alt=media&token=8f51757b-fa92-4500-b004-982afc2487d3" alt="ERD" style="zoom: 50%;" />

#### ERD Crow's Foot
![ex](https://blog.kakaocdn.net/dn/bQlRXW/btq6WhbzAwM/fvcO5VHwT2eTtBwexZeCCK/img.png)

#### 예시 

+ 커뮤니티
  + 사람
    + 사람이 글을 작성
  + 역할
    + 관리자, 회원, 임원
  + 글 : 쓰기, 수정, 삭제
    + 글은 사람이 작성
    + 글은 댓글을 달 수 있음 
    + 글은 내용, 이미지, 영상을 포함
  + 댓글 : 쓰기, 수정, 삭제 
    + 사람들이 작성
    + 글이 있어야 해요
  + 좋아요 
    + 사람들이 글에 누릅니다. 글은 사람들에 의해서 좋아요를 받습니다. 

<img src="https://cdn.discordapp.com/attachments/988658571241738252/1011457783763320913/unknown.png" alt="erd" style="zoom:50%;" />

![instagram](https://app.genmymodel.com/api/projects/_9nKpoG20EeeCSaocM3J-ZQ/diagrams/_9nKpom20EeeCSaocM3J-ZQ/png)



+ 제 1 정규화 : ? 
+ 원자성 ? 

+ 한 컬럼에 값이 반드시 하나씩 있어야한다 

+ 원자값 = 1

+ 값이 절대 두개를 반환할 수 없다. 

+ 파이썬 함수 return 생각해보기 



### 정규화 

+ 중복을 최소한으로 
+ 정규화 = 데이터를 쪼개는 개념 
+ 정규화를 많이 할수록 좋을까? 
  + too much `JOIN` 필요

#### 적용해보기 

1. 아래의 테이블이 있다 

| 제목               | 장르         | 가수     | 데뷔연도 |
| ------------------ | ------------ | -------- | -------- |
| 여름의 낮잠        | 인디밴드, 락 | 디어베어 | 2020     |
| 방에 모기가 있어요 | 인디밴드, 팝 | 십센치   | 2010     |
| 봄이 좋아          | 인디밴드, 락 | 십센치   | 2010     |

2. 문제점 파악하기 
   * 장르에 2개 값 있으면 안됨 

| 제목 | 가수 | 데뷔연도 | 가격 | 유형 |
| ---- | ---- | -------- | ---- | ---- |
|      |      |          | 3000 | MP3  |
|      |      |          | 100  | DRM  |
|      |      |          | 3000 | MP3  |
|      |      |          | 100  | DRM  |



##### 제 1정규화 

| 제목               | 가수     | 데뷔연도 |
| ------------------ | -------- | -------- |
| 여름의 낮잠        | 디어베어 | 2020     |
| 방에 모기가 있어요 | 십센치   | 2010     |
| 봄이 좋아          | 십센치   | 2010     |

장르 

| 장르     |
| -------- |
| 인디밴드 |
| 팝       |
| 락       |

장르_앨범

| 제목        | 장르 |
| ----------- | ---- |
| 여름의 낮잠 | 인디 |
| 여름의 낮잠 | 락   |

##### 제 2정규화

| 제목 | 가수 | 데뷔연도 |
| ---- | ---- | -------- |
|      |      |          |
|      |      |          |

Pricing

| 제목 | 가격 | 유형 |
| ---- | ---- | ---- |
|      |      |      |
|      |      |      |
|      |      |      |

##### 제 3정규화

Album

| 제목 | 가수 |
| ---- | ---- |
|      |      |
|      |      |
|      |      |

artist

| 가수 | 데뷔연도 |
| ---- | -------- |
|      |          |
|      |          |



#### 역정규화

+ 라는 개념도 있음 



#### 탐색 비용 vs. 조작 비용

+ 정하기 

  1. 내가 빨리 조회할 것이냐 
  2. ... ? 

+ 두 비용 사이 더 적다고 판단되는 쪽으로 db를 구성한다

+ ex

  1. 앨범 수, 앨범 나올 때마다 데이터 업뎃 왜? 앨범 발매 주기 기니까 조작 비용이 더 가성비 갠춘 

  2. 배말의 민족 주문수 억대 . 내 주문 조회할때마다 억 대에서 탐색 ? 

     >주문_2020
     >
     >주문_2021
     >
     >주문_2022 : 12억 

+ 구글 같은데는 이런거 따지는거에 미쳐있다 
  + 왜 ? 이걸 잘 따져야 비용을 아낄 수 있고, 성능을 높일 수 있기 때문에 

+ bcnf 정규화 ? 
